
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as S,r as N,O as T,D as O,z as U,a as d,o as $,k as E,e as t,w as l,g as p,E as g,P as f,x as I}from"./index-6nv6P-ZS.js";const L={class:"container"},A=S({__name:"product_in",setup(J){const P=[{productNumber:"P001",name:"产品一",grade:"A",origin:"中国",costPrice:100,packaging:"盒"},{productNumber:"P002",name:"产品二",grade:"B",origin:"美国",costPrice:200,packaging:"袋"},{productNumber:"P003",name:"产品三",grade:"A",origin:"日本",costPrice:300,packaging:"瓶"},{productNumber:"P004",name:"产品四",grade:"C",origin:"德国",costPrice:400,packaging:"盒"},{productNumber:"P005",name:"产品五",grade:"A",origin:"法国",costPrice:500,packaging:"袋"},{productNumber:"P006",name:"产品六",grade:"B",origin:"英国",costPrice:600,packaging:"瓶"},{productNumber:"P007",name:"产品七",grade:"C",origin:"意大利",costPrice:700,packaging:"盒"},{productNumber:"P008",name:"产品八",grade:"A",origin:"西班牙",costPrice:800,packaging:"袋"},{productNumber:"P009",name:"产品九",grade:"B",origin:"澳大利亚",costPrice:900,packaging:"瓶"},{productNumber:"P010",name:"产品十",grade:"C",origin:"加拿大",costPrice:1e3,packaging:"盒"}],n=N([...P]),a=T({productNumber:"",name:"",grade:"",origin:"",costPrice:0,packaging:""}),s=N(""),_=O(()=>s.value?n.value.filter(o=>o.name.toLowerCase().includes(s.value.toLowerCase())||o.productNumber.toLowerCase().includes(s.value.toLowerCase())):n.value);U(()=>{const o=localStorage.getItem("productsData");o?n.value=JSON.parse(o):localStorage.setItem("productsData",JSON.stringify(n.value))});function b(){localStorage.setItem("productsData",JSON.stringify(n.value))}function v(){n.value=[...P],b(),g.success("数据已还原到初始状态！")}async function V(){if(!a.productNumber||!a.name||!a.grade||!a.origin||!a.costPrice||!a.packaging){f.alert("所有字段都是必填项，请检查输入！","错误",{confirmButtonText:"OK",type:"error"});return}try{if(n.value.find(e=>e.productNumber===a.productNumber)){f.alert("产品编号已存在，无法添加！","错误",{confirmButtonText:"OK",type:"error"});return}n.value.push({...a,costPrice:Number(a.costPrice)}),b(),k(),f.alert("产品信息已成功提交！","成功",{confirmButtonText:"OK",type:"success"})}catch{f.alert("提交失败，请稍后再试！","错误",{confirmButtonText:"OK",type:"error"})}}function k(){const o=localStorage.getItem("productsData");o&&(n.value=JSON.parse(o))}function y(o){const e=n.value[o];a.productNumber=e.productNumber,a.name=e.name,a.grade=e.grade,a.origin=e.origin,a.costPrice=e.costPrice,a.packaging=e.packaging}function w(o,e){f.confirm(`确定要删除产品 ${e.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{n.value.splice(o,1),b(),g.success(`产品 ${e.name} 删除成功！`)}).catch(()=>{g.info("已取消删除操作")})}function C(){const o=n.value.find(e=>e.productNumber===a.productNumber);o?(o.name=a.name,o.grade=a.grade,o.origin=a.origin,o.costPrice=a.costPrice,o.packaging=a.packaging,b(),k(),g.success("产品信息更新成功！")):g.error("产品编号无效，无法更新！")}return(o,e)=>{const u=d("el-input"),i=d("el-table-column"),m=d("el-button"),x=d("el-table"),c=d("el-form-item"),D=d("el-form");return $(),E("div",L,[t(u,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),placeholder:"搜索产品",class:"search-bar",clearable:""},null,8,["modelValue"]),t(x,{data:_.value,height:"400",style:{width:"100%","margin-bottom":"20px"}},{default:l(()=>[t(i,{prop:"productNumber",label:"产品编号",width:"180"}),t(i,{prop:"name",label:"产品名称",width:"180"}),t(i,{prop:"grade",label:"产品等级",width:"180"}),t(i,{prop:"origin",label:"产地",width:"180"}),t(i,{prop:"costPrice",label:"进价",width:"180"}),t(i,{prop:"packaging",label:"包装物",width:"180"}),t(i,{label:"操作",width:"180"},{default:l(r=>[t(m,{size:"small",type:"primary",onClick:B=>y(r.$index)},{default:l(()=>e[7]||(e[7]=[p("编辑")])),_:2},1032,["onClick"]),t(m,{size:"small",type:"danger",onClick:B=>w(r.$index,r.row)},{default:l(()=>e[8]||(e[8]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(D,{model:a,"label-width":"100",class:"form-container"},{default:l(()=>[t(c,{label:"产品编号"},{default:l(()=>[t(u,{modelValue:a.productNumber,"onUpdate:modelValue":e[1]||(e[1]=r=>a.productNumber=r)},null,8,["modelValue"])]),_:1}),t(c,{label:"产品名称"},{default:l(()=>[t(u,{modelValue:a.name,"onUpdate:modelValue":e[2]||(e[2]=r=>a.name=r)},null,8,["modelValue"])]),_:1}),t(c,{label:"产品等级"},{default:l(()=>[t(u,{modelValue:a.grade,"onUpdate:modelValue":e[3]||(e[3]=r=>a.grade=r)},null,8,["modelValue"])]),_:1}),t(c,{label:"产地"},{default:l(()=>[t(u,{modelValue:a.origin,"onUpdate:modelValue":e[4]||(e[4]=r=>a.origin=r)},null,8,["modelValue"])]),_:1}),t(c,{label:"进价"},{default:l(()=>[t(u,{modelValue:a.costPrice,"onUpdate:modelValue":e[5]||(e[5]=r=>a.costPrice=r),type:"number"},null,8,["modelValue"])]),_:1}),t(c,{label:"包装物"},{default:l(()=>[t(u,{modelValue:a.packaging,"onUpdate:modelValue":e[6]||(e[6]=r=>a.packaging=r)},null,8,["modelValue"])]),_:1}),t(c,null,{default:l(()=>[t(m,{type:"primary",onClick:V},{default:l(()=>e[9]||(e[9]=[p(" 提交 ")])),_:1}),t(m,{type:"primary",onClick:C},{default:l(()=>e[10]||(e[10]=[p(" 更新 ")])),_:1}),t(m,{type:"warning",onClick:v},{default:l(()=>e[11]||(e[11]=[p(" 还原数据 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}}),z=I(A,[["__scopeId","data-v-2bfa5c68"]]);export{z as default};
