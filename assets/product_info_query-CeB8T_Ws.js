
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{x as B,r as _,z as C,a as d,o as E,k as T,b as v,e as n,w as a,g as i,t as $}from"./index-DvTWmKn0.js";const J={class:"container"},M={class:"product-info"},O={class:"mb-4"},F={class:"dialog-footer"},K={__name:"product_info_query",setup(R){const u=_({inboundQuantity:0,inbound_date:""}),l=_([]),y=_(0),m=_(!1),c=_(null),f=_("");function g(){const t=window.innerHeight;y.value=t-200}window.addEventListener("resize",g),C(g);const w=[{product_number:"001",name:"产品1",quantity:10,last_inbound_date:"2023-01-01"},{product_number:"002",name:"产品2",quantity:20,last_inbound_date:"2023-02-01"},{product_number:"003",name:"产品3",quantity:30,last_inbound_date:"2023-03-01"},{product_number:"004",name:"产品4",quantity:40,last_inbound_date:"2023-04-01"},{product_number:"005",name:"产品5",quantity:50,last_inbound_date:"2023-05-01"},{product_number:"006",name:"产品6",quantity:60,last_inbound_date:"2023-06-01"},{product_number:"007",name:"产品7",quantity:70,last_inbound_date:"2023-07-01"},{product_number:"008",name:"产品8",quantity:80,last_inbound_date:"2023-08-01"},{product_number:"009",name:"产品9",quantity:90,last_inbound_date:"2023-09-01"},{product_number:"010",name:"产品10",quantity:100,last_inbound_date:"2023-10-01"}];function b(t){localStorage.setItem("products",JSON.stringify(t))}function k(){const t=localStorage.getItem("products");return t?JSON.parse(t):w}function p(){l.value=k()}function x(){if(c.value){const t=l.value.findIndex(e=>e.product_number===c.value.product_number);t!==-1&&(l.value[t]={...c.value,...u.value},b(l.value),p(),m.value=!1)}}function h(t){l.value=l.value.filter(e=>e.product_number!==t),b(l.value),p()}function S(){const t=l.value.filter(e=>e._checked).map(e=>e.product_number);l.value=l.value.filter(e=>!t.includes(e.product_number)),b(l.value),p()}C(p);function P(t){c.value=t,u.value.inboundQuantity=t.quantity||0,u.value.inbound_date=t.last_inbound_date||"",m.value=!0}function D(t){h(t.product_number)}function N(){const t=f.value.toLowerCase();l.value=k().filter(e=>e.name.toLowerCase().includes(t)||e.product_number.includes(t))}function I(){b(w),p()}return(t,e)=>{const V=d("el-input"),r=d("el-button"),s=d("el-table-column"),L=d("el-table"),q=d("el-form-item"),z=d("el-date-picker"),H=d("el-form"),Q=d("el-dialog");return E(),T("div",J,[v("div",M,[v("div",O,[n(V,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),placeholder:"搜索产品",onInput:N,clearable:""},null,8,["modelValue"]),n(r,{type:"warning",plain:"",onClick:I},{default:a(()=>e[6]||(e[6]=[i(" 还原数据 ")])),_:1}),n(r,{type:"danger",plain:"",onClick:S},{default:a(()=>e[7]||(e[7]=[i(" 删除选中 ")])),_:1})])]),n(L,{data:l.value,height:y.value,border:"",style:{width:"100%"},onRowClick:e[1]||(e[1]=o=>c.value=o)},{default:a(()=>[n(s,{type:"selection",width:"55"}),n(s,{label:"产品编号",width:"100",align:"center"},{default:a(o=>[i($(o.row.product_number),1)]),_:1}),n(s,{property:"name",label:"产品名称",width:"120",align:"center"}),n(s,{property:"quantity",label:"总量",width:"100",align:"center"}),n(s,{property:"last_inbound_date",label:"最后入库日期",width:"180",align:"center"}),n(s,{label:"操作",width:"180",align:"center"},{default:a(o=>[n(r,{size:"mini",onClick:U=>P(o.row)},{default:a(()=>e[8]||(e[8]=[i("编辑")])),_:2},1032,["onClick"]),n(r,{size:"mini",type:"danger",onClick:U=>D(o.row)},{default:a(()=>e[9]||(e[9]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),n(Q,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o),title:"编辑产品",width:"400px"},{footer:a(()=>[v("div",F,[n(r,{onClick:e[4]||(e[4]=o=>m.value=!1)},{default:a(()=>e[10]||(e[10]=[i("取消")])),_:1}),n(r,{type:"primary",onClick:x},{default:a(()=>e[11]||(e[11]=[i("保存")])),_:1})])]),default:a(()=>[n(H,{model:u.value,"label-width":"100px"},{default:a(()=>[n(q,{label:"产品数量"},{default:a(()=>[n(V,{modelValue:u.value.inboundQuantity,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.inboundQuantity=o),modelModifiers:{number:!0},type:"number",min:"0"},null,8,["modelValue"])]),_:1}),n(q,{label:"入库日期"},{default:a(()=>[n(z,{modelValue:u.value.inbound_date,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.inbound_date=o),type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},A=B(K,[["__scopeId","data-v-f6ab6ea0"]]);export{A as default};
