
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as I,r as N,O as L,D as O,z as T,a as p,o as m,k as v,e as a,w as t,c as y,t as g,g as k,b as J,E as C,P as j,x as G}from"./index-DvTWmKn0.js";const A=["onClick"],F=["onClick"],H=["onClick"],K=["onClick"],Q=["onClick"],R=["onClick"],W=I({__name:"material_in",setup(X){const P=[{materialNumber:"M001",name:"物资一",unit:"件",costPrice:10,selling_price:15,quantity:100},{materialNumber:"M002",name:"物资二",unit:"件",costPrice:20,selling_price:25,quantity:200},{materialNumber:"M003",name:"物资三",unit:"件",costPrice:30,selling_price:35,quantity:300},{materialNumber:"M004",name:"物资四",unit:"件",costPrice:40,selling_price:45,quantity:400},{materialNumber:"M005",name:"物资五",unit:"件",costPrice:50,selling_price:55,quantity:500},{materialNumber:"M006",name:"物资六",unit:"件",costPrice:60,selling_price:65,quantity:600},{materialNumber:"M007",name:"物资七",unit:"件",costPrice:70,selling_price:75,quantity:700},{materialNumber:"M008",name:"物资八",unit:"件",costPrice:80,selling_price:85,quantity:800},{materialNumber:"M009",name:"物资九",unit:"件",costPrice:90,selling_price:95,quantity:900},{materialNumber:"M010",name:"物资十",unit:"件",costPrice:100,selling_price:105,quantity:1e3}],s=N([...P]),o=L({materialNumber:"",name:"",unit:"",costPrice:0,selling_price:0,quantity:0}),w=N(!1),x=N(""),U=O(()=>x.value?s.value.filter(u=>u.name.toLowerCase().includes(x.value.toLowerCase())||u.materialNumber.toLowerCase().includes(x.value.toLowerCase())):s.value),d=N(null),i=N("");T(()=>{const u=localStorage.getItem("materialsData");u?s.value=JSON.parse(u):localStorage.setItem("materialsData",JSON.stringify(s.value))});function $(){localStorage.setItem("materialsData",JSON.stringify(s.value))}function q(){s.value=[...P],$(),C.success("数据已还原到初始状态！")}function M(){if(!o.materialNumber||!o.name){C.error("请填写完整表单！");return}s.value.push({...o}),$(),Object.keys(o).forEach(u=>o[u]=""),w.value=!1,C.success("添加成功！")}function B(u){d.value=u,i.value=""}function _(u,l){d.value=u,i.value=l}function f(){$(),d.value=null,i.value="",C.success("修改成功！")}function D(u,l){j.confirm(`确定要删除物资 ${l.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.value.splice(u,1),$(),C.success(`物资 ${l.name} 删除成功！`)}).catch(()=>{C.info("已取消删除操作")})}return(u,l)=>{const r=p("el-input"),c=p("el-table-column"),b=p("el-button"),z=p("el-table"),V=p("el-form-item"),S=p("el-form"),E=p("el-dialog");return m(),v("div",null,[a(r,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),size:"small",placeholder:"搜索物资信息",style:{"margin-bottom":"15px"},clearable:""},null,8,["modelValue"]),a(z,{data:U.value,style:{width:"100%"}},{default:t(()=>[a(c,{prop:"materialNumber",label:"物资编号"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="materialNumber")?(m(),y(r,{key:0,modelValue:e.row.materialNumber,"onUpdate:modelValue":n=>e.row.materialNumber=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"materialNumber")},g(e.row.materialNumber),9,A))]),_:1}),a(c,{prop:"name",label:"物资名称"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="name")?(m(),y(r,{key:0,modelValue:e.row.name,"onUpdate:modelValue":n=>e.row.name=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"name")},g(e.row.name),9,F))]),_:1}),a(c,{prop:"unit",label:"单位"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="unit")?(m(),y(r,{key:0,modelValue:e.row.unit,"onUpdate:modelValue":n=>e.row.unit=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"unit")},g(e.row.unit),9,H))]),_:1}),a(c,{prop:"costPrice",label:"单价"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="costPrice")?(m(),y(r,{key:0,modelValue:e.row.costPrice,"onUpdate:modelValue":n=>e.row.costPrice=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"costPrice")},g(e.row.costPrice),9,K))]),_:1}),a(c,{prop:"selling_price",label:"售价"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="selling_price")?(m(),y(r,{key:0,modelValue:e.row.selling_price,"onUpdate:modelValue":n=>e.row.selling_price=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"selling_price")},g(e.row.selling_price),9,Q))]),_:1}),a(c,{prop:"quantity",label:"数量"},{default:t(e=>[d.value===e.$index&&(!i.value||i.value==="quantity")?(m(),y(r,{key:0,modelValue:e.row.quantity,"onUpdate:modelValue":n=>e.row.quantity=n,size:"small",onBlur:f},null,8,["modelValue","onUpdate:modelValue"])):(m(),v("span",{key:1,onClick:n=>_(e.$index,"quantity")},g(e.row.quantity),9,R))]),_:1}),a(c,{label:"操作"},{default:t(e=>[a(b,{size:"small",type:"primary",icon:"el-icon-edit",onClick:n=>B(e.$index)},{default:t(()=>l[10]||(l[10]=[k(" 编辑 ")])),_:2},1032,["onClick"]),a(b,{size:"small",type:"danger",icon:"el-icon-delete",onClick:n=>D(e.$index,e.row)},{default:t(()=>l[11]||(l[11]=[k("删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(b,{type:"primary",style:{"margin-top":"15px"},onClick:l[1]||(l[1]=e=>w.value=!0)},{default:t(()=>l[12]||(l[12]=[k(" 添加物资 ")])),_:1}),a(b,{type:"warning",style:{"margin-top":"15px"},onClick:q},{default:t(()=>l[13]||(l[13]=[k(" 还原数据 ")])),_:1}),a(E,{modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=e=>w.value=e),title:"添加物资"},{default:t(()=>[a(S,{model:o,"label-width":"100px"},{default:t(()=>[a(V,{label:"物资编号"},{default:t(()=>[a(r,{modelValue:o.materialNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>o.materialNumber=e)},null,8,["modelValue"])]),_:1}),a(V,{label:"物资名称"},{default:t(()=>[a(r,{modelValue:o.name,"onUpdate:modelValue":l[3]||(l[3]=e=>o.name=e)},null,8,["modelValue"])]),_:1}),a(V,{label:"单位"},{default:t(()=>[a(r,{modelValue:o.unit,"onUpdate:modelValue":l[4]||(l[4]=e=>o.unit=e)},null,8,["modelValue"])]),_:1}),a(V,{label:"单价"},{default:t(()=>[a(r,{modelValue:o.costPrice,"onUpdate:modelValue":l[5]||(l[5]=e=>o.costPrice=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(V,{label:"售价"},{default:t(()=>[a(r,{modelValue:o.selling_price,"onUpdate:modelValue":l[6]||(l[6]=e=>o.selling_price=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(V,{label:"数量"},{default:t(()=>[a(r,{modelValue:o.quantity,"onUpdate:modelValue":l[7]||(l[7]=e=>o.quantity=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),J("div",null,[a(b,{type:"primary",onClick:M},{default:t(()=>l[14]||(l[14]=[k("提交")])),_:1}),a(b,{onClick:l[8]||(l[8]=e=>w.value=!1)},{default:t(()=>l[15]||(l[15]=[k("取消")])),_:1})])]),_:1},8,["modelValue"])])}}}),Z=G(W,[["__scopeId","data-v-239b3634"]]);export{Z as default};
