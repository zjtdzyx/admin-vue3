
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as k,r as _,O as S,D as T,z as $,a as r,o as B,k as E,e as a,w as u,g as c,E as i,P as I,x as L}from"./index-BgC0ENBM.js";const O={class:"container"},U=k({__name:"material_out",setup(J){const y=[{materialNumber:"M001",name:"物资一",unit:"件",quantity:100},{materialNumber:"M002",name:"物资二",unit:"件",quantity:200},{materialNumber:"M003",name:"物资三",unit:"件",quantity:300},{materialNumber:"M004",name:"物资四",unit:"件",quantity:400},{materialNumber:"M005",name:"物资五",unit:"件",quantity:500},{materialNumber:"M006",name:"物资六",unit:"件",quantity:600},{materialNumber:"M007",name:"物资七",unit:"件",quantity:700},{materialNumber:"M008",name:"物资八",unit:"件",quantity:800},{materialNumber:"M009",name:"物资九",unit:"件",quantity:900},{materialNumber:"M010",name:"物资十",unit:"件",quantity:1e3}],o=_([...y]),t=S({materialNumber:"",name:"",unit:"",quantity:""}),m=_(""),v=T(()=>m.value?o.value.filter(l=>l.name.toLowerCase().includes(m.value.toLowerCase())||l.materialNumber.toLowerCase().includes(m.value.toLowerCase())):o.value);$(()=>{const l=localStorage.getItem("materialsData");l?o.value=JSON.parse(l):localStorage.setItem("materialsData",JSON.stringify(o.value))});function b(){localStorage.setItem("materialsData",JSON.stringify(o.value))}function q(){o.value=[...y],b(),i.success("数据已还原到初始状态！")}function N(){const l=localStorage.getItem("materialsData");l&&(o.value=JSON.parse(l))}function g(l){const e=o.value[l];t.materialNumber=e.materialNumber,t.name=e.name,t.unit=e.unit,t.quantity=e.quantity.toString()}function V(l,e){I.confirm(`确定要删除物资 ${e.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.splice(l,1),b(),i.success(`物资 ${e.name} 删除成功！`)}).catch(()=>{i.info("已取消删除操作")})}function w(){const l=o.value.find(e=>e.materialNumber===t.materialNumber);l?(l.name=t.name,l.unit=t.unit,l.quantity=Number(t.quantity),b(),N(),i.success("物资信息更新成功！")):i.error("物资编号无效，无法更新！")}function M(){if(o.value.find(e=>e.materialNumber===t.materialNumber)){i.error("物资编号已存在，无法添加！");return}o.value.push({...t,quantity:Number(t.quantity)}),b(),N(),i.success("物资添加成功！")}return(l,e)=>{const s=r("el-input"),d=r("el-table-column"),f=r("el-button"),C=r("el-table"),p=r("el-form-item"),D=r("el-form");return B(),E("div",O,[a(s,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=n=>m.value=n),placeholder:"搜索物资",class:"search-bar",clearable:""},null,8,["modelValue"]),a(C,{data:v.value,height:"400",style:{width:"100%","margin-bottom":"20px"}},{default:u(()=>[a(d,{prop:"materialNumber",label:"物资编号",width:"180"}),a(d,{prop:"name",label:"名称",width:"180"}),a(d,{prop:"unit",label:"单位",width:"180"}),a(d,{prop:"quantity",label:"数量",width:"180"}),a(d,{label:"操作",width:"180"},{default:u(n=>[a(f,{size:"small",type:"primary",onClick:x=>g(n.$index)},{default:u(()=>e[5]||(e[5]=[c("编辑")])),_:2},1032,["onClick"]),a(f,{size:"small",type:"danger",onClick:x=>V(n.$index,n.row)},{default:u(()=>e[6]||(e[6]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(D,{model:t,"label-width":"100",class:"form-container"},{default:u(()=>[a(p,{label:"物资编号"},{default:u(()=>[a(s,{modelValue:t.materialNumber,"onUpdate:modelValue":e[1]||(e[1]=n=>t.materialNumber=n)},null,8,["modelValue"])]),_:1}),a(p,{label:"名称"},{default:u(()=>[a(s,{modelValue:t.name,"onUpdate:modelValue":e[2]||(e[2]=n=>t.name=n)},null,8,["modelValue"])]),_:1}),a(p,{label:"单位"},{default:u(()=>[a(s,{modelValue:t.unit,"onUpdate:modelValue":e[3]||(e[3]=n=>t.unit=n)},null,8,["modelValue"])]),_:1}),a(p,{label:"数量"},{default:u(()=>[a(s,{modelValue:t.quantity,"onUpdate:modelValue":e[4]||(e[4]=n=>t.quantity=n),type:"number"},null,8,["modelValue"])]),_:1}),a(p,null,{default:u(()=>[a(f,{type:"primary",onClick:M},{default:u(()=>e[7]||(e[7]=[c(" 添加 ")])),_:1}),a(f,{type:"primary",onClick:w},{default:u(()=>e[8]||(e[8]=[c(" 更新 ")])),_:1}),a(f,{type:"warning",onClick:q},{default:u(()=>e[9]||(e[9]=[c(" 还原数据 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}}),h=L(U,[["__scopeId","data-v-0545643e"]]);export{h as default};
