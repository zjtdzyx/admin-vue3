
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as O,r as p,z as J,Q as M,a as d,o as F,k as Q,b as w,e as t,w as a,g as r,t as R,E as D,x as j}from"./index-hvzRevkC.js";const q={class:"container"},A={class:"customer-info"},G={class:"mb-4"},K={class:"dialog-footer"},P={class:"mb-4 flex gap-4"},W={class:"button-container mb-4"},X=O({name:"CustomerInfo",__name:"customer_info",setup(Y){const o=p({name:"",contact:"",address:"",isEnterprise:!1,remark:"",date:new Date().toISOString()}),i=p([]),V=p(0),m=p(!1);function _(){const n=window.innerHeight;V.value=n-200}J(()=>{_(),window.addEventListener("resize",_),b()}),M(()=>{window.removeEventListener("resize",_)});const E=[{id:1,date:"2023-01-01",name:"客户1",contact:"1234567890",address:"地址1",isEnterprise:!1,remark:"备注1"},{id:2,date:"2023-02-01",name:"客户2",contact:"1234567891",address:"地址2",isEnterprise:!0,remark:"备注2"},{id:3,date:"2023-03-01",name:"客户3",contact:"1234567892",address:"地址3",isEnterprise:!1,remark:"备注3"},{id:4,date:"2023-04-01",name:"客户4",contact:"1234567893",address:"地址4",isEnterprise:!0,remark:"备注4"},{id:5,date:"2023-05-01",name:"客户5",contact:"1234567894",address:"地址5",isEnterprise:!1,remark:"备注5"},{id:6,date:"2023-06-01",name:"客户6",contact:"1234567895",address:"地址6",isEnterprise:!0,remark:"备注6"},{id:7,date:"2023-07-01",name:"客户7",contact:"1234567896",address:"地址7",isEnterprise:!1,remark:"备注7"},{id:8,date:"2023-08-01",name:"客户8",contact:"1234567897",address:"地址8",isEnterprise:!0,remark:"备注8"},{id:9,date:"2023-09-01",name:"客户9",contact:"1234567898",address:"地址9",isEnterprise:!1,remark:"备注9"},{id:10,date:"2023-10-01",name:"客户10",contact:"1234567899",address:"地址10",isEnterprise:!0,remark:"备注10"}];function k(n){localStorage.setItem("customers",JSON.stringify(n))}function y(){const n=localStorage.getItem("customers");return n?JSON.parse(n):E}function b(){i.value=y()}function S(){if(o.value.id){const n=i.value.findIndex(e=>e.id===o.value.id);n!==-1&&(i.value[n]={...o.value})}else o.value.id=Date.now(),i.value.push({...o.value});k(i.value),b(),m.value=!1}function U(n){o.value={...n},m.value=!0}function I(n){i.value=i.value.filter(e=>e.id!==n),k(i.value),b()}const f=p(!1),v=p("");function N(){if(!v.value.trim()){D.error("请输入客户姓名");return}i.value=y().filter(n=>n.name.includes(v.value)),i.value.length||D.warning("未找到匹配的客户信息"),f.value=!1}function $(){f.value=!1,v.value=""}function z(){k(E),b()}return(n,e)=>{const s=d("el-button"),u=d("el-table-column"),B=d("el-table"),c=d("el-input"),g=d("el-form-item"),C=d("el-radio"),H=d("el-radio-group"),L=d("el-form"),x=d("el-dialog");return F(),Q("div",q,[w("div",A,[w("div",G,[t(s,{type:"primary",plain:"",onClick:e[0]||(e[0]=l=>m.value=!0)},{default:a(()=>e[12]||(e[12]=[r(" 添加客户 ")])),_:1}),t(s,{type:"warning",plain:"",onClick:z},{default:a(()=>e[13]||(e[13]=[r(" 还原数据 ")])),_:1}),t(s,{type:"info",plain:"",onClick:e[1]||(e[1]=l=>f.value=!0)},{default:a(()=>e[14]||(e[14]=[r(" 查询客户 ")])),_:1})])]),t(B,{data:i.value,height:V.value,border:"",style:{width:"100%"},onRowClick:e[2]||(e[2]=l=>n.selectedCustomer=l)},{default:a(()=>[t(u,{type:"selection",width:"55"}),t(u,{label:"客户编号",width:"100",align:"center"},{default:a(l=>[r(R(l.$index+1),1)]),_:1}),t(u,{property:"name",label:"客户姓名",width:"120",align:"center"}),t(u,{property:"contact",label:"联系方式",width:"150",align:"center"}),t(u,{property:"address",label:"客户地址",width:"200",align:"center","show-overflow-tooltip":""}),t(u,{property:"isEnterprise",label:"客户类型",width:"120",align:"center",formatter:l=>l.isEnterprise?"企业":"个人"},null,8,["formatter"]),t(u,{property:"remark",label:"备注",width:"150",align:"center","show-overflow-tooltip":""}),t(u,{label:"操作",width:"180",align:"center"},{default:a(l=>[t(s,{size:"mini",onClick:T=>U(l.row)},{default:a(()=>e[15]||(e[15]=[r("编辑")])),_:2},1032,["onClick"]),t(s,{size:"mini",type:"danger",onClick:T=>I(l.row.id)},{default:a(()=>e[16]||(e[16]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),t(x,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=l=>m.value=l),title:"客户信息",width:600},{footer:a(()=>[w("div",K,[t(s,{onClick:e[8]||(e[8]=l=>m.value=!1)},{default:a(()=>e[19]||(e[19]=[r(" 取消 ")])),_:1}),t(s,{type:"primary",onClick:S},{default:a(()=>e[20]||(e[20]=[r(" 保存 ")])),_:1})])]),default:a(()=>[t(L,{model:o.value,"label-width":"100px"},{default:a(()=>[t(g,{label:"客户姓名"},{default:a(()=>[t(c,{modelValue:o.value.name,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.name=l)},null,8,["modelValue"])]),_:1}),t(g,{label:"联系方式"},{default:a(()=>[t(c,{modelValue:o.value.contact,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.contact=l)},null,8,["modelValue"])]),_:1}),t(g,{label:"客户地址"},{default:a(()=>[t(c,{modelValue:o.value.address,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.address=l)},null,8,["modelValue"])]),_:1}),t(g,{label:"客户类型"},{default:a(()=>[t(H,{modelValue:o.value.isEnterprise,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.isEnterprise=l)},{default:a(()=>[t(C,{label:!0},{default:a(()=>e[17]||(e[17]=[r(" 企业 ")])),_:1}),t(C,{label:!1},{default:a(()=>e[18]||(e[18]=[r(" 个人 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"备注"},{default:a(()=>[t(c,{modelValue:o.value.remark,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.remark=l),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(x,{modelValue:f.value,"onUpdate:modelValue":e[11]||(e[11]=l=>f.value=l),title:"查询客户信息",width:"400px","close-on-click-modal":!1},{default:a(()=>[w("div",P,[t(c,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=l=>v.value=l),style:{width:"240px"},placeholder:"请输入客户姓名"},null,8,["modelValue"])]),w("div",W,[t(s,{type:"success",plain:"",onClick:N},{default:a(()=>e[21]||(e[21]=[r(" 确定 ")])),_:1}),t(s,{type:"danger",plain:"",onClick:$},{default:a(()=>e[22]||(e[22]=[r(" 取消 ")])),_:1})])]),_:1},8,["modelValue"])])}}}),h=j(X,[["__scopeId","data-v-d18ad5cb"]]);export{h as default};
