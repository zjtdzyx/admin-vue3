
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as L,r as y,O,D as T,z as J,a as f,o as m,k as p,e as l,w as n,c as N,t as x,g as b,b as M,E as V,P as j,x as G}from"./index-6nv6P-ZS.js";const P=["onClick"],q=["onClick"],H=["onClick"],K=["onClick"],Q=["onClick"],R=L({__name:"farmer_info",setup(W){const A=[{farmerNumber:"F001",name:"张三",address:"A村",contact:"1234567890",sowingArea:"50亩"},{farmerNumber:"F002",name:"李四",address:"B村",contact:"2345678901",sowingArea:"30亩"},{farmerNumber:"F003",name:"王五",address:"C村",contact:"3456789012",sowingArea:"40亩"},{farmerNumber:"F004",name:"赵六",address:"D村",contact:"4567890123",sowingArea:"60亩"},{farmerNumber:"F005",name:"孙七",address:"E村",contact:"5678901234",sowingArea:"20亩"},{farmerNumber:"F006",name:"周八",address:"F村",contact:"6789012345",sowingArea:"70亩"},{farmerNumber:"F007",name:"吴九",address:"A村",contact:"7890123456",sowingArea:"10亩"},{farmerNumber:"F008",name:"郑十",address:"B村",contact:"8901234567",sowingArea:"80亩"},{farmerNumber:"F009",name:"冯十一",address:"C村",contact:"9012345678",sowingArea:"90亩"},{farmerNumber:"F010",name:"陈十二",address:"D村",contact:"0123456789",sowingArea:"100亩"}],s=y([...A]),o=O({farmerNumber:"",name:"",address:"",contact:"",sowingArea:""}),w=y(!1),g=y(""),U=T(()=>g.value?s.value.filter(r=>r.name.toLowerCase().includes(g.value.toLowerCase())||r.farmerNumber.toLowerCase().includes(g.value.toLowerCase())):s.value),i=y(null),u=y("");J(()=>{const r=localStorage.getItem("farmersData");r?s.value=JSON.parse(r):localStorage.setItem("farmersData",JSON.stringify(s.value))});function $(){localStorage.setItem("farmersData",JSON.stringify(s.value))}function B(){s.value=[...A],$(),V.success("数据已还原到初始状态！")}function D(){if(!o.farmerNumber||!o.name){V.error("请填写完整表单！");return}s.value.push({...o}),$(),Object.keys(o).forEach(r=>o[r]=""),w.value=!1,V.success("添加成功！")}function F(r){i.value=r,u.value=""}function _(r,a){i.value=r,u.value=a}function k(){$(),i.value=null,u.value="",V.success("修改成功！")}function z(r,a){j.confirm(`确定要删除农户 ${a.name} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.value.splice(r,1),$(),V.success(`农户 ${a.name} 删除成功！`)}).catch(()=>{V.info("已取消删除操作")})}return(r,a)=>{const d=f("el-input"),c=f("el-table-column"),v=f("el-button"),S=f("el-table"),C=f("el-form-item"),E=f("el-form"),I=f("el-dialog");return m(),p("div",null,[l(d,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),size:"small",placeholder:"搜索农户信息",style:{"margin-bottom":"15px"},clearable:""},null,8,["modelValue"]),l(S,{data:U.value,style:{width:"100%"}},{default:n(()=>[l(c,{prop:"farmerNumber",label:"农户编号"},{default:n(e=>[i.value===e.$index&&(!u.value||u.value==="farmerNumber")?(m(),N(d,{key:0,modelValue:e.row.farmerNumber,"onUpdate:modelValue":t=>e.row.farmerNumber=t,size:"small",onBlur:k},null,8,["modelValue","onUpdate:modelValue"])):(m(),p("span",{key:1,onClick:t=>_(e.$index,"farmerNumber")},x(e.row.farmerNumber),9,P))]),_:1}),l(c,{prop:"name",label:"农户名称"},{default:n(e=>[i.value===e.$index&&(!u.value||u.value==="name")?(m(),N(d,{key:0,modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,size:"small",onBlur:k},null,8,["modelValue","onUpdate:modelValue"])):(m(),p("span",{key:1,onClick:t=>_(e.$index,"name")},x(e.row.name),9,q))]),_:1}),l(c,{prop:"address",label:"农户住址"},{default:n(e=>[i.value===e.$index&&(!u.value||u.value==="address")?(m(),N(d,{key:0,modelValue:e.row.address,"onUpdate:modelValue":t=>e.row.address=t,size:"small",onBlur:k},null,8,["modelValue","onUpdate:modelValue"])):(m(),p("span",{key:1,onClick:t=>_(e.$index,"address")},x(e.row.address),9,H))]),_:1}),l(c,{prop:"contact",label:"联系电话"},{default:n(e=>[i.value===e.$index&&(!u.value||u.value==="contact")?(m(),N(d,{key:0,modelValue:e.row.contact,"onUpdate:modelValue":t=>e.row.contact=t,size:"small",onBlur:k},null,8,["modelValue","onUpdate:modelValue"])):(m(),p("span",{key:1,onClick:t=>_(e.$index,"contact")},x(e.row.contact),9,K))]),_:1}),l(c,{prop:"sowingArea",label:"播种面积"},{default:n(e=>[i.value===e.$index&&(!u.value||u.value==="sowingArea")?(m(),N(d,{key:0,modelValue:e.row.sowingArea,"onUpdate:modelValue":t=>e.row.sowingArea=t,size:"small",onBlur:k},null,8,["modelValue","onUpdate:modelValue"])):(m(),p("span",{key:1,onClick:t=>_(e.$index,"sowingArea")},x(e.row.sowingArea),9,Q))]),_:1}),l(c,{label:"操作"},{default:n(e=>[l(v,{size:"small",type:"primary",icon:"el-icon-edit",onClick:t=>F(e.$index)},{default:n(()=>a[9]||(a[9]=[b(" 编辑 ")])),_:2},1032,["onClick"]),l(v,{size:"small",type:"danger",icon:"el-icon-delete",onClick:t=>z(e.$index,e.row)},{default:n(()=>a[10]||(a[10]=[b("删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(v,{type:"primary",style:{"margin-top":"15px"},onClick:a[1]||(a[1]=e=>w.value=!0)},{default:n(()=>a[11]||(a[11]=[b(" 添加农户 ")])),_:1}),l(v,{type:"warning",style:{"margin-top":"15px"},onClick:B},{default:n(()=>a[12]||(a[12]=[b(" 还原数据 ")])),_:1}),l(I,{modelValue:w.value,"onUpdate:modelValue":a[8]||(a[8]=e=>w.value=e),title:"添加农户"},{default:n(()=>[l(E,{model:o,"label-width":"100px"},{default:n(()=>[l(C,{label:"农户编号"},{default:n(()=>[l(d,{modelValue:o.farmerNumber,"onUpdate:modelValue":a[2]||(a[2]=e=>o.farmerNumber=e)},null,8,["modelValue"])]),_:1}),l(C,{label:"农户名称"},{default:n(()=>[l(d,{modelValue:o.name,"onUpdate:modelValue":a[3]||(a[3]=e=>o.name=e)},null,8,["modelValue"])]),_:1}),l(C,{label:"农户住址"},{default:n(()=>[l(d,{modelValue:o.address,"onUpdate:modelValue":a[4]||(a[4]=e=>o.address=e)},null,8,["modelValue"])]),_:1}),l(C,{label:"联系电话"},{default:n(()=>[l(d,{modelValue:o.contact,"onUpdate:modelValue":a[5]||(a[5]=e=>o.contact=e)},null,8,["modelValue"])]),_:1}),l(C,{label:"播种面积"},{default:n(()=>[l(d,{modelValue:o.sowingArea,"onUpdate:modelValue":a[6]||(a[6]=e=>o.sowingArea=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),M("div",null,[l(v,{type:"primary",onClick:D},{default:n(()=>a[13]||(a[13]=[b("提交")])),_:1}),l(v,{onClick:a[7]||(a[7]=e=>w.value=!1)},{default:n(()=>a[14]||(a[14]=[b("取消")])),_:1})])]),_:1},8,["modelValue"])])}}}),Y=G(R,[["__scopeId","data-v-b979d879"]]);export{Y as default};
